<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Trading Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',sans-serif;}
    body{
      background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);
      color:#fff;text-align:center;min-height:100vh;
    }
    .header{
      background:linear-gradient(90deg,#1f1c2c,#928dab);
      padding:20px;font-size:26px;font-weight:700;
      border-bottom:2px solid rgba(255,255,255,0.1);
      letter-spacing:1px;
    }
    .header span{color:#ff9a9e;}
    /* Search Bar */
    .search-bar{display:flex;justify-content:center;flex-wrap:wrap;padding:12px;gap:6px;max-width:700px;margin:auto;}
    .search-bar input{
      flex:1 1 180px;padding:6px 10px;border:none;border-radius:12px 0 0 12px;
      font-size:14px;background:rgba(255,255,255,0.05);color:#fff;text-align:center;
      height:36px;line-height:20px;
    }
    .search-bar input::placeholder{color:#bbb;}
    .search-bar button{
      flex:0 0 auto;padding:0 14px;border:none;border-radius:0 12px 12px 0;
      background:#ff6a00;color:#fff;font-weight:600;cursor:pointer;
      transition:0.3s;height:36px;line-height:20px;
    }
    .search-bar button:hover{background:#ff8c42;}
    /* Coins Grid */
    .coins{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:25px;
      padding:25px;
      justify-items:center;
    }
    .coin-card{
      background:rgba(255,255,255,0.08);
      backdrop-filter:blur(15px);
      border-radius:20px;
      padding:25px 20px;
      cursor:pointer;
      transition:all 0.3s ease-in-out;
      border:1px solid rgba(255,255,255,0.15);
      text-align:center;
      width:100%;
      max-width:260px;
      position:relative;
      overflow:hidden;
    }
    .coin-card::before{
      content:"";
      position:absolute;
      top:-50%;left:-50%;width:200%;height:200%;
      background:conic-gradient(from 180deg at 50% 50%,#ff6a00,#ff0080,#00f,#00ff88,#ff6a00);
      animation:spin 6s linear infinite;
      z-index:0;
      opacity:0.15;
    }
    @keyframes spin{100%{transform:rotate(360deg);}}
    .coin-card:hover{
      transform:translateY(-8px) scale(1.02);
      box-shadow:0 12px 30px rgba(0,0,0,0.4);
    }
    .coin-content{position:relative;z-index:1;}
    .coin-logo{
      width:70px;height:70px;margin-bottom:12px;
      border-radius:50%;border:2px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.05);
      padding:6px;
    }
    .coin-name{font-weight:700;font-size:18px;margin-bottom:4px;}
    .coin-symbol{color:#9ca3af;font-size:14px;margin-bottom:12px;}
    .coin-price{font-size:20px;font-weight:600;color:#ffcc70;margin-bottom:6px;}
    .coin-info{font-size:13px;color:#ccc;}
    .coin-info p{margin:3px 0;}
    /* Popup */
    .modal{
      display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;
      background:rgba(0,0,0,0.7);backdrop-filter:blur(5px);
      align-items:center;justify-content:center;
    }
    .modal-content{
      background:rgba(30,30,40,0.95);padding:25px;border-radius:20px;
      max-width:400px;width:90%;text-align:center;position:relative;
      animation:fadeIn 0.3s ease-in-out;
    }
    @keyframes fadeIn{from{opacity:0;transform:scale(0.9);}to{opacity:1;transform:scale(1);}}
    .close{
      position:absolute;top:10px;right:15px;font-size:24px;font-weight:bold;cursor:pointer;color:#fff;
    }
    .signal{
      background:rgba(255,255,255,0.05);
      padding:15px;border-radius:15px;margin-top:15px;font-size:15px;
      border:1px solid rgba(255,255,255,0.1);
    }
    .long{color:#4ade80;font-weight:700;}
    .short{color:#f87171;font-weight:700;}
  </style>
</head>
<body>
  <div class="header">üöÄ <span>Crypto Dashboard</span></div>

  <div class="search-bar">
    <input type="text" id="search" placeholder="Search coin or token (BTC, SHIB, ETH)">
    <button onclick="searchCoin()">Analyze</button>
  </div>

  <div class="coins" id="coins"></div>

  <!-- Popup Modal -->
  <div id="coinModal" class="modal">
    <div class="modal-content" id="modalContent">
      <span class="close" onclick="closeModal()">&times;</span>
      <!-- Coin details will be injected here -->
    </div>
  </div>

  <script>
    async function loadTopCoins(){
      try{
        const res=await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=20&page=1");
        const data=await res.json();
        displayCoins(data.map(c=>({
          id:c.id,name:c.name,symbol:c.symbol,
          quote:{USD:{price:c.current_price,market_cap:c.market_cap,volume_24h:c.total_volume,high_24h:c.high_24h,low_24h:c.low_24h}},
          logo:c.image
        })));
      }catch(e){console.error("Failed to load coins",e);}
    }

    function displayCoins(coins){
      const container=document.getElementById("coins");
      container.innerHTML="";
      coins.forEach(c=>{
        const card=document.createElement("div");
        card.className="coin-card";
        card.innerHTML=`
          <div class="coin-content">
            <img class="coin-logo" src="${c.logo}" alt="${c.name}">
            <div class="coin-name">${c.name}</div>
            <div class="coin-symbol">${c.symbol.toUpperCase()}</div>
            <div class="coin-price">$${c.quote.USD.price.toFixed(2)}</div>
            <div class="coin-info">
              <p>MCap: $${(c.quote.USD.market_cap/1e9).toFixed(2)}B</p>
              <p>Vol: $${(c.quote.USD.volume_24h/1e6).toFixed(2)}M</p>
            </div>
          </div>`;
        card.onclick=()=>showDetails(c);
        container.appendChild(card);
      });
    }

    function showDetails(c){
      const price=c.quote.USD.price,high=c.quote.USD.high_24h,low=c.quote.USD.low_24h;
      const mc=c.quote.USD.market_cap,vol=c.quote.USD.volume_24h;
      const direction=price>((low+(high-low)/2))?"LONG":"SHORT";
      const entry=(price*0.99).toFixed(4),target1=(price*1.03).toFixed(4),target2=(price*1.06).toFixed(4),sl=(price*0.95).toFixed(4);

      document.getElementById("modalContent").innerHTML=`
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="coin-logo" src="${c.logo}" style="width:80px;height:80px;margin-bottom:10px;">
        <h2>${c.name} (${c.symbol.toUpperCase()})</h2>
        <p style="color:#9ca3af;">M.Cap: $${mc.toLocaleString()}</p>
        <div class="coin-info" style="margin-top:15px;">
          <p>üí∞ Price: <strong>$${price}</strong></p>
          <p>üîÑ Volume: <strong>$${vol.toLocaleString()}</strong></p>
          <p>‚¨ÜÔ∏è High: <strong>$${high}</strong></p>
          <p>‚¨áÔ∏è Low: <strong>$${low}</strong></p>
        </div>
        <div class="signal">
          <h3>Trading Signal</h3>
          <p class="${direction==='LONG'?'long':'short'}">Signal: ${direction}</p>
          <p>‚úîÔ∏è Entry: ${entry}</p>
          <p>üéØ Target: ${target1} - ${target2}</p>
          <p>‚ùå SL: ${sl}</p>
        </div>`;
      document.getElementById("coinModal").style.display="flex";
    }

    function closeModal(){document.getElementById("coinModal").style.display="none";}

    async function searchCoin(){
      const query=document.getElementById("search").value.trim().toLowerCase();
      if(!query) return alert("Enter a coin or token name!");
      try{
        const res=await fetch(`https://api.coingecko.com/api/v3/search?query=${query}`);
        const data=await res.json();
        if(data.coins.length>0){
          const cgId=data.coins[0].id;
          const resCG=await fetch(`https://api.coingecko.com/api/v3/coins/${cgId}`);
          const c=await resCG.json();
          const coinData={name:c.name,symbol:c.symbol,quote:{USD:{
            price:c.market_data.current_price.usd,
            market_cap:c.market_data.market_cap.usd,
            volume_24h:c.market_data.total_volume.usd,
            high_24h:c.market_data.high_24h.usd,
            low_24h:c.market_data.low_24h.usd
          }},logo:c.image.large};
          showDetails(coinData);
        }else alert("Coin not found!");
      }catch(e){console.error("Search error",e);alert("Error fetching data");}
    }

    loadTopCoins();
  </script>
</body>
</html>
